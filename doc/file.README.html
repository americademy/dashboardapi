<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="file_list.html"></iframe>

      <div id="content"><div id='filecontents'>
<h1 id="label-Dashboard+API+v1.0.0">Dashboard API v1.0.0</h1>

<p>Documentation: <a
href="http://www.rubydoc.info/gems/dashboard-api/1.0.0">here</a> Issues: <a
href="https://github.com/jletizia/dashboardapi/issues">here</a></p>

<h1 id="label-Description">Description</h1>

<p>A ruby implementation of the entire <a
href="https://documentation.meraki.com/zGeneral_Administration/Other_Topics/The_Cisco_Meraki_Dashboard_API">Meraki
Dashboard API</a></p>

<h1 id="label-Usage">Usage</h1>

<h2 id="label-Installation">Installation</h2>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='id identifier rubyid_install'>install</span> <span class='id identifier rubyid_dashboard'>dashboard</span><span class='op'>-</span><span class='id identifier rubyid_api'>api</span>
</code></pre>

<p>Once the gem is installed, you can use it by requiring
<code>dashboard-api</code> <code>ruby require &#39;dashboard-api&#39;
</code></p>

<h2 id="label-Examples">Examples</h2>

<h3 id="label-Basic+implementation">Basic implementation</h3>

<h4 id="label-Get+a+list+of+networks+for+a+specific+Dashboard+Organization">Get a list of networks for a specific Dashboard Organization</h4>

<pre class="code ruby"><code class="ruby"><span class='comment'># get_networks.rb
</span><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dashboard-api</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'># read in API key and Org ID from Environment variables
</span><span class='ivar'>@dashboard_api_key</span> <span class='op'>=</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dashboard_api_key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
<span class='ivar'>@dashboard_org_id</span> <span class='op'>=</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dashboard_org_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

<span class='id identifier rubyid_dapi'>dapi</span> <span class='op'>=</span> <span class='const'>DashboardAPI</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='ivar'>@dashboard_api_key</span><span class='rparen'>)</span>
<span class='id identifier rubyid_dapi'>dapi</span><span class='period'>.</span><span class='id identifier rubyid_get_networks'>get_networks</span><span class='lparen'>(</span><span class='ivar'>@dashboard_org_id</span><span class='rparen'>)</span>
</code></pre>

<h4 id="label-Update+a+specific+network">Update a specific network</h4>

<p>This will update a specific network to have the new name of <code>New VPN
Spoke</code>. Note the options hash, <code>network_options</code>. Whenever
making a call to something that updates Dashboard, an options hash will be
used, with all necessary attributes as keys. Specifics about these keys can
be found in the official <a
href="https://dashboard.meraki.com/manage/support/api_docs">Meraki API
Documentation</a>. “`ruby</p>

<h1 id="label-update_network.rb">update_network.rb</h1>

<p>require &#39;dashboard-api&#39;</p>

<h1 id="label-read+in+API+key+and+Org+ID+from+Environment+variables">read in API key and Org ID from Environment variables</h1>

<p>@dashboard_api_key = <a href="'dashboard_api_key'">ENV</a>
@dashboard_org_id = <a href="'dashboard_org_id'">ENV</a> @network_id = <a
href="'combined_network'">ENV</a></p>

<p>dapi = DashboardAPI.new(@dashboard_api_key)</p>

<p>network_options = =&gt; @network_id, :name =&gt; &#39;New VPN
Spoke&#39; dapi.update_network(@network_id, network_options) “`</p>

<h1 id="label-Contributing">Contributing</h1>

<p>If you feel like contributing, information about the testing environment
can be found below. If you just want to use the gem to help interact with
the Meraki Dashboard, you only need to read the above sections.</p>

<h2 id="label-Dependencies">Dependencies</h2>

<p>To install the necessary dependencies run: <code>bash bundle install
</code> or</p>

<pre class="code ruby"><code class="ruby">gem install --dev dashboard-api</code></pre>

<p>or look in the <code>Gemfile</code> and install each dependency
individually.</p>

<h2 id="label-Testing">Testing</h2>

<p>Because the Dashboard API needs actual Dashboard resources to hit against,
there is a decent amount of pre-configuring that needs to go into place.
This includes not only setting your API key, a default organization ID,
etc. but also setting up test devices that will be modified, removed,
claimed, etc. on Dashboard. It is recommended to use a completely separate
test organization, with separate test devices if possible, as to not
potentially disturb a production organization.</p>

<h3 id="label-Environment+Variables">Environment Variables</h3>

<p>Each test file will read in the necessary ENV variables for it&#39;s
specifc set of tests: <code>ruby class OrganizationsTest &lt;
Minitest::Test   def setup     @dashboard_api_key =
ENV['dashboard_api_key']     @org_id = ENV['dashboard_org_id']    
@network_id = ENV['test_network_id']     @dapi =
DashboardAPI.new(@dashboard_api_key)   end </code> The full list of
necessary ENV variables is: * <code>dashboard_api_key</code> Your Meraki
Dashboard API key * <code>dashboard_org_id</code> The Meraki Dashboard
Organization ID you will be testing on * <code>test_network_id</code> A
test network ID that will be used to test renaming networks *
<code>vpn_network</code> A test MX network that will test modifying AutoVPN
settings * <code>switch_network</code> A test MS netwok that will test
things like access policies, etc. * <code>mx_serial</code> A test MX that
has client traffic passing through it * <code>spare_mr</code> A test MR
used to claim in and out of networks * <code>test_admin_id</code> The ID of
a test admin used to test updating and deleting admins *
<code>config_template_id</code> A test configuration template network ID
used to test removing a template * <code>unclaimed_device</code> A device
that can be used to test claiming * <code>phone_network</code> Test phone
network * <code>phone_contact_id</code> Test contact for your phone network
* <code>saml_id</code> ID of a test SAML user *
<code>config_template_id</code> ID of the template you will bind the test
network to * <code>config_bind_network</code> network you want to bind to a
template</p>

<h3 id="label-Running+a+test">Running a test</h3>

<p>As this is an wrapper gem for an RESTful API, the vast majority of methods
make some sort of HTTP call. To reduce the amount of time testing takes,
and ensure that we have good data to work against at all times, we utilize
<a href="https://github.com/vcr/vcr">VCR</a>. This will capture the HTTP
interaction the first time a test is ran, save them as fixtures, and then
replay that fixture on each subsequent call to that method during tests.</p>

<h4 id="label-First+test+run+issues">First test run issues</h4>

<p>Due to the HTTP interactions containing private data we are trying to
obscure with environment variables in the first place (API key,
organization IDs, etc.), the fixtures used to initially test this gem can
not be provided here. This means that you will need to generate your own
fixtures. Luckily, this is as easy as just running the tests in the first
place. Unluckily, due to Minitest randomizing the order of it&#39;s tests,
you may run into situations where the test to delete a network runs for the
first time, before that network ever exists (remember, with VCR, only the
first test run&#39;s HTTP interaction is saved, and used for each later
test). When this happens, a 404 will be received, VCR will save it, and the
test will fail.</p>

<h4 id="label-What+this+means">What this means</h4>

<p>Getting all of the tests to a point where they all pass will not be a
trivial task, due to the workflow of: running the tests, finding the tests
that failed due to a prerequisite not having happened at some point before
that test run, fixing the prerequisite, deleting the fixture (they live in
<code>fixtures/vcr_cassettes/</code>), and rerunning the tests.</p>

<h4 id="label-How+to+actually+run+the+tests">How to actually run the tests</h4>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_rake'>rake</span> <span class='id identifier rubyid_test'>test</span>
</code></pre>

<p>After the first completely successful, all green run, tests will be almost
instantenous:</p>

<pre class="code ruby"><code class="ruby">➜  dashboard-api git:(master) ✗ rake test
Started with run options --seed 42405

DashAPITest
  test_snmp_returns_as_array                                      PASS (0.01s)
  test_license_state_returns_as_hash                              PASS (0.01s)
  test_api_key_is_a_string                                        PASS (0.00s)
  test_get_an_organization                                        PASS (0.01s)
  test_it_returns_as_json                                         PASS (0.00s)
  test_get_inventory_for_an_org                                   PASS (0.01s)
  test_get_license_state_for_an_org                               PASS (0.00s)
  test_third_party_peer_returns_as_array                          PASS (0.01s)
  test_it_is_a_dash_api                                           PASS (0.00s)
  test_current_snmp_status                                        PASS (0.00s)
  test_inventory_returns_as_array                                 PASS (0.00s)
  test_third_party_vpn_peers                                      PASS (0.00s)

Finished in 0.05813s
12 tests, 12 assertions, 0 failures, 0 errors, 0 skips</code></pre>
</div></div>

      <div id="footer">
  Generated on Thu Nov 17 22:15:38 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.3.0).
</div>

    </div>
  </body>
</html>